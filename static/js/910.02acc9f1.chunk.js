"use strict";(self.webpackChunkaston_project=self.webpackChunkaston_project||[]).push([[910],{4406:(e,r,t)=>{t.d(r,{uW:()=>y,m8:()=>a,k6:()=>c});var s=t(3641);const a={async addSearchedHistory(e){await s.V5.addSearchedHistory(e)},async removeSearchedHistory(e){await s.V5.removeSearchedHistory(e)},getSearchHistory:async()=>await s.V5.getSearchHistory()};var i=t(2791),o=t(5198),n=t(3537);const c=()=>{const{authStatus:e}=(0,o.aC)(),[r,t]=(0,i.useState)([]),[s,c]=(0,i.useState)(!0),d=(0,i.useCallback)((async()=>{c(!0),t(await a.getSearchHistory()),c(!1)}),[t]);return(0,i.useEffect)((()=>{e===n.tD.SignedIn?d():(t([]),c(!1))}),[e,d,t]),{searchHistory:r,setSearchHistory:t,isHistoryLoading:s}};var d=t(1087),l=t(1909),h=t(184);function u(e){let{id:r,query:t,data:s,setSearchHistory:i}=e;return(0,h.jsxs)("div",{className:"history-row",children:[(0,h.jsx)("div",{children:(0,h.jsx)("button",{onClick:async()=>{await a.removeSearchedHistory(r),i((e=>e.filter((e=>e.id!==r))))},children:(0,h.jsx)(l.lTq,{size:25})})}),(0,h.jsx)("div",{children:(0,h.jsx)(d.rU,{to:n.RouteName.SEARCH_PAGE+"?query="+t,children:s})}),(0,h.jsx)("div",{children:(0,h.jsx)(d.rU,{to:n.RouteName.SEARCH_PAGE+"?query="+t,children:t})})]})}function y(e){let{searchHistory:r,setSearchHistory:t}=e;return(0,h.jsx)(h.Fragment,{children:0!==r.length?(0,h.jsxs)("div",{className:"history-table",children:[(0,h.jsxs)("div",{className:"history-table__head-row",children:[(0,h.jsx)("div",{children:"Delete"}),(0,h.jsx)("div",{children:"Date"}),(0,h.jsx)("div",{children:"Search query"})]}),r.map((e=>(0,h.jsx)(u,{id:e.id,query:e.query,data:e.data,setSearchHistory:t},e.id)))]}):(0,h.jsx)("h2",{className:"history-not-found",children:"Nothing found"})})}},1910:(e,r,t)=>{t.r(r),t.d(r,{default:()=>n});var s=t(3002),a=t(4406),i=t(8760),o=t(184);function n(){const{searchHistory:e,setSearchHistory:r,isHistoryLoading:t}=(0,a.k6)();return t?(0,o.jsx)(i.aN,{}):(0,o.jsx)(s.SV,{FallbackComponent:i.NY,children:(0,o.jsxs)("div",{className:"history",children:[(0,o.jsx)("div",{className:"history__div",children:(0,o.jsx)("h1",{children:"History"})}),(0,o.jsx)(a.uW,{searchHistory:e,setSearchHistory:r})]})})}},3002:(e,r,t)=>{t.d(r,{SV:()=>o});var s=t(2791);const a=(0,s.createContext)(null),i={didCatch:!1,error:null};class o extends s.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=i}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var r,t,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];null===(r=(t=this.props).onReset)||void 0===r||r.call(t,{args:a,reason:"imperative-api"}),this.setState(i)}}componentDidCatch(e,r){var t,s;null===(t=(s=this.props).onError)||void 0===t||t.call(s,e,r)}componentDidUpdate(e,r){const{didCatch:t}=this.state,{resetKeys:s}=this.props;var a,o;t&&null!==r.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==r.length||e.some(((e,t)=>!Object.is(e,r[t])))}(e.resetKeys,s)&&(null===(a=(o=this.props).onReset)||void 0===a||a.call(o,{next:s,prev:e.resetKeys,reason:"keys"}),this.setState(i))}render(){const{children:e,fallbackRender:r,FallbackComponent:t,fallback:i}=this.props,{didCatch:o,error:n}=this.state;let c=e;if(o){const e={error:n,resetErrorBoundary:this.resetErrorBoundary};if("function"===typeof r)c=r(e);else if(t)c=(0,s.createElement)(t,e);else{if(null!==i&&!(0,s.isValidElement)(i))throw n;c=i}}return(0,s.createElement)(a.Provider,{value:{didCatch:o,error:n,resetErrorBoundary:this.resetErrorBoundary}},c)}}}}]);
//# sourceMappingURL=910.02acc9f1.chunk.js.map