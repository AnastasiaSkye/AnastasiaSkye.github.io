"use strict";(self.webpackChunkaston_project=self.webpackChunkaston_project||[]).push([[326],{9917:(e,t,a)=>{a.d(t,{MF:()=>m,s4:()=>h,u1:()=>l});var r=a(2791),s=a(1350),i=a(5198),n=a(3537),d=a(3641);const o={async addFavorite(e){await d.V5.addFavorite(e)},async removeFavorite(e){await d.V5.removeFavorite(e)},readFavorites:async()=>await d.V5.readFavorites()},l=()=>{const{authStatus:e}=(0,i.aC)(),{favoritesId:t,setFavoritesId:a}=(0,r.useContext)(s.Y),[d,l]=(0,r.useState)(!0),c=(0,r.useCallback)((async()=>{l(!0),a(await o.readFavorites()),l(!1)}),[a]);return(0,r.useEffect)((()=>{e===n.tD.SignedIn?c():(a([]),l(!1))}),[e,c,a]),{favoritesId:t,isFavoritesIdLoading:d}};var c=a(7689);const h=e=>{const{authStatus:t}=(0,i.aC)(),{favoritesId:a,setFavoritesId:d}=(0,r.useContext)(s.Y),[l,h]=(0,r.useState)(a.includes(e)),v=(0,c.s0)(),u=(0,r.useCallback)((e=>{d((t=>t.filter((t=>t!==e))))}),[d]);return{isFavorite:l,changeFavorite:async()=>{t===n.tD.SignedIn?l?(await o.removeFavorite(e),h(!1),u(e)):(await o.addFavorite(e),h(!0)):v(n.RouteName.REGISTRATION_PAGE)}}};var v=a(8766),u=a(184);const m=(0,r.memo)((e=>{let{favoriteId:t}=e;const{data:a,isLoading:r}=(0,d.b5)(t);return(0,u.jsx)(u.Fragment,{children:!r&&a&&(0,u.jsx)(v.zT,{plant:a})})}))},8766:(e,t,a)=>{a.d(t,{zT:()=>u,Qz:()=>m,Xi:()=>v});var r=a(2791),s=a(1087),i=a(1765),n=a(9917),d=a(184);const o=(0,r.memo)((e=>{let{id:t}=e;const{isFavorite:a,changeFavorite:r}=(0,n.s4)(t);return(0,d.jsx)("button",{className:"heart",onClick:r,"data-testid":"heart",children:a?(0,d.jsx)(i.r6X,{size:25,"data-testid":"heart-add"}):(0,d.jsx)(i.JUb,{size:25,"data-testid":"heart-remove"})})}));var l=a(3537),c=a(8222),h=a(8760);const v=(0,r.memo)((e=>{let{src:t,alt:a,className:r}=e;return(0,d.jsx)("div",{className:"plant-img ".concat(r," ").concat(!t&&"plant-filter"),children:t?(0,d.jsx)(h.Ee,{src:t,alt:a}):(0,d.jsx)(h.Ee,{className:"filter",src:"https://perenual.com/storage/image/missing_image.jpg",alt:"Missing"})})})),u=(0,r.memo)((e=>{let{plant:t}=e;return(0,d.jsxs)("div",{className:"plant-card","data-testid":"plant-card",children:[(0,d.jsx)(s.OL,{to:l.RouteName.PlANT_PAGE+"/"+t.id,children:(0,d.jsx)(v,{src:t.image,alt:t.name})}),(0,d.jsxs)("div",{className:"plant-card__div",children:[(0,d.jsx)(s.OL,{to:l.RouteName.PlANT_PAGE+"/"+t.id,children:(0,d.jsx)("h3",{children:t.name})}),(0,d.jsxs)("div",{className:"plant-card__info",children:[(0,d.jsx)("div",{children:(0,c.gW)(t).map((e=>(0,d.jsx)("div",{children:e},e)))}),(0,d.jsx)(o,{id:t.id})]})]})]})}));function m(e){let{plant:t}=e;return(0,d.jsxs)("div",{className:"plant","data-testid":"plant-details",children:[(0,d.jsx)(v,{src:t.image,alt:t.name}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{children:t.name}),(0,d.jsx)("div",{className:"plant__description","data-testid":"description",children:t.description}),(0,d.jsxs)("div",{className:"plant__info-card","data-testid":"info-card",children:[(0,c.Y7)(t).map((e=>(0,d.jsx)("div",{children:e},e))),(0,d.jsx)(o,{id:t.id})]})]})]})}},7326:(e,t,a)=>{a.r(t),a.d(t,{default:()=>o});var r=a(3002),s=a(7755),i=a(9917),n=a(8760),d=a(184);function o(){const{favoritesId:e,isFavoritesIdLoading:t}=(0,i.u1)();return t?(0,d.jsx)(n.aN,{}):(0,d.jsx)(r.SV,{FallbackComponent:n.NY,children:(0,d.jsx)(s.C,{title:"Favorite plants",isEmpty:0===e.length,children:e.map((e=>(0,d.jsx)(i.MF,{favoriteId:e},e)))})})}},7755:(e,t,a)=>{a.d(t,{C:()=>s});a(2791);var r=a(184);function s(e){let{title:t,children:a,isEmpty:s}=e;return(0,r.jsxs)("div",{className:"card-list","data-testid":"card-list",children:[(0,r.jsxs)("div",{className:"card-list__div",children:[(0,r.jsx)("h1",{"data-testid":"title",children:t}),(0,r.jsx)("div",{children:"Here everyone can find the ideal plant that matches your preferences"})]}),(0,r.jsx)("section",{className:"card-list__section",children:a}),s&&(0,r.jsx)("h2",{children:"Nothing found"})]})}},3002:(e,t,a)=>{a.d(t,{SV:()=>n});var r=a(2791);const s=(0,r.createContext)(null),i={didCatch:!1,error:null};class n extends r.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=i}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var t,a,r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];null===(t=(a=this.props).onReset)||void 0===t||t.call(a,{args:s,reason:"imperative-api"}),this.setState(i)}}componentDidCatch(e,t){var a,r;null===(a=(r=this.props).onError)||void 0===a||a.call(r,e,t)}componentDidUpdate(e,t){const{didCatch:a}=this.state,{resetKeys:r}=this.props;var s,n;a&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some(((e,a)=>!Object.is(e,t[a])))}(e.resetKeys,r)&&(null===(s=(n=this.props).onReset)||void 0===s||s.call(n,{next:r,prev:e.resetKeys,reason:"keys"}),this.setState(i))}render(){const{children:e,fallbackRender:t,FallbackComponent:a,fallback:i}=this.props,{didCatch:n,error:d}=this.state;let o=e;if(n){const e={error:d,resetErrorBoundary:this.resetErrorBoundary};if("function"===typeof t)o=t(e);else if(a)o=(0,r.createElement)(a,e);else{if(null!==i&&!(0,r.isValidElement)(i))throw d;o=i}}return(0,r.createElement)(s.Provider,{value:{didCatch:n,error:d,resetErrorBoundary:this.resetErrorBoundary}},o)}}}}]);
//# sourceMappingURL=326.58440311.chunk.js.map