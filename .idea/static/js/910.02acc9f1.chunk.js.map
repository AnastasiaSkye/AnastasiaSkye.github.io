{"version":3,"file":"static/js/910.02acc9f1.chunk.js","mappings":"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","sources":["entities/history/history.ts","entities/history/use-history.ts","entities/history/ui/history-row/ui.tsx","entities/history/ui/ui.tsx","pages/history/ui/index.tsx","../node_modules/react-error-boundary/dist/react-error-boundary.esm.js"],"sourcesContent":["import { firebaseApi } from 'shared/api';\r\nimport { SearchHistory } from 'shared/config';\r\n\r\nexport const history = {\r\n\tasync addSearchedHistory(query: string): Promise<void> {\r\n\t\tvoid await firebaseApi.addSearchedHistory(query);\r\n\t},\r\n\r\n\tasync removeSearchedHistory(id: string): Promise<void> {\r\n\t\tvoid await firebaseApi.removeSearchedHistory(id);\r\n\t},\r\n\r\n\tasync getSearchHistory(): Promise<SearchHistory> {\r\n\t\treturn await firebaseApi.getSearchHistory();\r\n\t}\r\n};","import React, { useCallback, useEffect, useState } from 'react';\r\n\r\nimport { useAuth } from 'entities/user';\r\nimport { AuthStatus, SearchHistory } from 'shared/config';\r\n\r\nimport { history } from './history';\r\n\r\ninterface useHistoryResult {\r\n\tsearchHistory: SearchHistory;\r\n\tsetSearchHistory: React.Dispatch<React.SetStateAction<SearchHistory>>;\r\n\tisHistoryLoading: boolean;\r\n}\r\n\r\nexport const useHistory = (): useHistoryResult => {\r\n\tconst { authStatus } = useAuth();\r\n\tconst [searchHistory, setSearchHistory] = useState<SearchHistory>([]);\r\n\tconst [isHistoryLoading, setIsHistoryLoading] = useState<boolean>(true);\r\n\r\n\tconst getSearchHistory = useCallback(async (): Promise<void> => {\r\n\t\tsetIsHistoryLoading(true);\r\n\t\tsetSearchHistory(await history.getSearchHistory());\r\n\t\tsetIsHistoryLoading(false);\r\n\t}, [setSearchHistory]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (authStatus === AuthStatus.SignedIn) {\r\n\t\t\tvoid getSearchHistory();\r\n\t\t} else {\r\n\t\t\tsetSearchHistory([]);\r\n\t\t\tsetIsHistoryLoading(false);\r\n\t\t}\r\n\t}, [authStatus, getSearchHistory, setSearchHistory]);\r\n\r\n\treturn { searchHistory, setSearchHistory, isHistoryLoading };\r\n};","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { MdOutlineClose } from 'react-icons/md';\r\n\r\nimport { history } from 'entities/history';\r\nimport { RouteName, SearchHistory } from 'shared/config';\r\n\r\nimport './styles.css';\r\n\r\ninterface Props {\r\n\tid: string;\r\n\tquery: string;\r\n\tdata: string;\r\n\tsetSearchHistory: React.Dispatch<React.SetStateAction<SearchHistory>>;\r\n}\r\n\r\nexport function HistoryRow({ id, query, data, setSearchHistory }: Props) {\r\n\r\n\tconst deleteHistoryRow = async (): Promise<void> => {\r\n\t\tawait history.removeSearchedHistory(id);\r\n\t\tsetSearchHistory(history => history.filter(h => h.id !== id));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className='history-row'>\r\n\t\t\t<div>\r\n\t\t\t\t<button onClick={deleteHistoryRow}>\r\n\t\t\t\t\t<MdOutlineClose size={25} />\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<Link to={RouteName.SEARCH_PAGE + '?query=' + query}>\r\n\t\t\t\t\t{data}\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<Link to={RouteName.SEARCH_PAGE + '?query=' + query}>\r\n\t\t\t\t\t{query}\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}","import React from 'react';\r\n\r\nimport { SearchHistory } from 'shared/config';\r\n\r\nimport { HistoryRow } from './history-row';\r\n\r\nimport './styles.css';\r\n\r\ninterface Props {\r\n\tsearchHistory: SearchHistory;\r\n\tsetSearchHistory: React.Dispatch<React.SetStateAction<SearchHistory>>;\r\n}\r\n\r\nexport function HistoryTable({ searchHistory, setSearchHistory }: Props) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{searchHistory.length !== 0 ?\r\n\t\t\t\t<div className='history-table'>\r\n\t\t\t\t\t<div className='history-table__head-row'>\r\n\t\t\t\t\t\t<div>Delete</div>\r\n\t\t\t\t\t\t<div>Date</div>\r\n\t\t\t\t\t\t<div>Search query</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{searchHistory.map(item => (\r\n\t\t\t\t\t\t<HistoryRow key={item.id} id={item.id} query={item.query} data={item.data}\r\n\t\t\t\t\t\t\t\t\tsetSearchHistory={setSearchHistory} />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t\t:\r\n\t\t\t\t<h2 className='history-not-found'>Nothing found</h2>\r\n\t\t\t}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n","import { ErrorBoundary } from 'react-error-boundary';\r\n\r\nimport { HistoryTable, useHistory } from 'entities/history';\r\nimport { Fallback, Loader } from 'shared/ui';\r\n\r\nimport './styles.css';\r\n\r\nexport function History() {\r\n\tconst { searchHistory, setSearchHistory, isHistoryLoading } = useHistory();\r\n\r\n\treturn isHistoryLoading ? (\r\n\t\t<Loader />\r\n\t) : (\r\n\t\t<ErrorBoundary FallbackComponent={Fallback}>\r\n\t\t\t<div className='history'>\r\n\t\t\t\t<div className='history__div'>\r\n\t\t\t\t\t<h1>History</h1>\r\n\t\t\t\t</div>\r\n\t\t\t\t<HistoryTable searchHistory={searchHistory} setSearchHistory={setSearchHistory} />\r\n\t\t\t</div>\r\n\t\t</ErrorBoundary>\r\n\t);\r\n}","'use client';\nimport { createContext, Component, createElement, isValidElement, useContext, useState, useMemo, forwardRef } from 'react';\n\nconst ErrorBoundaryContext = createContext(null);\n\nconst initialState = {\n  didCatch: false,\n  error: null\n};\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.resetErrorBoundary = this.resetErrorBoundary.bind(this);\n    this.state = initialState;\n  }\n  static getDerivedStateFromError(error) {\n    return {\n      didCatch: true,\n      error\n    };\n  }\n  resetErrorBoundary() {\n    const {\n      error\n    } = this.state;\n    if (error !== null) {\n      var _this$props$onReset, _this$props;\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      (_this$props$onReset = (_this$props = this.props).onReset) === null || _this$props$onReset === void 0 ? void 0 : _this$props$onReset.call(_this$props, {\n        args,\n        reason: \"imperative-api\"\n      });\n      this.setState(initialState);\n    }\n  }\n  componentDidCatch(error, info) {\n    var _this$props$onError, _this$props2;\n    (_this$props$onError = (_this$props2 = this.props).onError) === null || _this$props$onError === void 0 ? void 0 : _this$props$onError.call(_this$props2, error, info);\n  }\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      didCatch\n    } = this.state;\n    const {\n      resetKeys\n    } = this.props;\n\n    // There's an edge case where if the thing that triggered the error happens to *also* be in the resetKeys array,\n    // we'd end up resetting the error boundary immediately.\n    // This would likely trigger a second error to be thrown.\n    // So we make sure that we don't check the resetKeys on the first call of cDU after the error is set.\n\n    if (didCatch && prevState.error !== null && hasArrayChanged(prevProps.resetKeys, resetKeys)) {\n      var _this$props$onReset2, _this$props3;\n      (_this$props$onReset2 = (_this$props3 = this.props).onReset) === null || _this$props$onReset2 === void 0 ? void 0 : _this$props$onReset2.call(_this$props3, {\n        next: resetKeys,\n        prev: prevProps.resetKeys,\n        reason: \"keys\"\n      });\n      this.setState(initialState);\n    }\n  }\n  render() {\n    const {\n      children,\n      fallbackRender,\n      FallbackComponent,\n      fallback\n    } = this.props;\n    const {\n      didCatch,\n      error\n    } = this.state;\n    let childToRender = children;\n    if (didCatch) {\n      const props = {\n        error,\n        resetErrorBoundary: this.resetErrorBoundary\n      };\n      if (typeof fallbackRender === \"function\") {\n        childToRender = fallbackRender(props);\n      } else if (FallbackComponent) {\n        childToRender = createElement(FallbackComponent, props);\n      } else if (fallback === null || isValidElement(fallback)) {\n        childToRender = fallback;\n      } else {\n        throw error;\n      }\n    }\n    return createElement(ErrorBoundaryContext.Provider, {\n      value: {\n        didCatch,\n        error,\n        resetErrorBoundary: this.resetErrorBoundary\n      }\n    }, childToRender);\n  }\n}\nfunction hasArrayChanged() {\n  let a = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let b = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  return a.length !== b.length || a.some((item, index) => !Object.is(item, b[index]));\n}\n\nfunction assertErrorBoundaryContext(value) {\n  if (value == null || typeof value.didCatch !== \"boolean\" || typeof value.resetErrorBoundary !== \"function\") {\n    throw new Error(\"ErrorBoundaryContext not found\");\n  }\n}\n\nfunction useErrorBoundary() {\n  const context = useContext(ErrorBoundaryContext);\n  assertErrorBoundaryContext(context);\n  const [state, setState] = useState({\n    error: null,\n    hasError: false\n  });\n  const memoized = useMemo(() => ({\n    resetBoundary: () => {\n      context.resetErrorBoundary();\n      setState({\n        error: null,\n        hasError: false\n      });\n    },\n    showBoundary: error => setState({\n      error,\n      hasError: true\n    })\n  }), [context.resetErrorBoundary]);\n  if (state.hasError) {\n    throw state.error;\n  }\n  return memoized;\n}\n\nfunction withErrorBoundary(component, errorBoundaryProps) {\n  const Wrapped = forwardRef((props, ref) => createElement(ErrorBoundary, errorBoundaryProps, createElement(component, {\n    ...props,\n    ref\n  })));\n\n  // Format for display in DevTools\n  const name = component.displayName || component.name || \"Unknown\";\n  Wrapped.displayName = \"withErrorBoundary(\".concat(name, \")\");\n  return Wrapped;\n}\n\nexport { ErrorBoundary, ErrorBoundaryContext, useErrorBoundary, withErrorBoundary };\n"],"names":["history","addSearchedHistory","query","firebaseApi","removeSearchedHistory","id","async","getSearchHistory","useHistory","authStatus","useAuth","searchHistory","setSearchHistory","useState","isHistoryLoading","setIsHistoryLoading","useCallback","useEffect","AuthStatus","SignedIn","HistoryRow","_ref","data","_jsxs","className","children","_jsx","onClick","filter","h","MdOutlineClose","size","Link","to","RouteName","SEARCH_PAGE","HistoryTable","_Fragment","length","map","item","History","Loader","ErrorBoundary","FallbackComponent","Fallback","ErrorBoundaryContext","createContext","initialState","didCatch","error","Component","constructor","props","super","this","resetErrorBoundary","bind","state","getDerivedStateFromError","_this$props$onReset","_this$props","_len","arguments","args","Array","_key","onReset","call","reason","setState","componentDidCatch","info","_this$props$onError","_this$props2","onError","componentDidUpdate","prevProps","prevState","resetKeys","_this$props$onReset2","_this$props3","a","undefined","b","some","index","Object","is","hasArrayChanged","next","prev","render","fallbackRender","fallback","childToRender","createElement","isValidElement","Provider","value"],"sourceRoot":""}