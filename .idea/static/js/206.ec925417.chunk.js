"use strict";(self.webpackChunkaston_project=self.webpackChunkaston_project||[]).push([[206],{9917:(e,t,a)=>{a.d(t,{MF:()=>m,s4:()=>h,u1:()=>l});var r=a(2791),s=a(1350),i=a(5198),n=a(3537),o=a(3641);const d={async addFavorite(e){await o.V5.addFavorite(e)},async removeFavorite(e){await o.V5.removeFavorite(e)},readFavorites:async()=>await o.V5.readFavorites()},l=()=>{const{authStatus:e}=(0,i.aC)(),{favoritesId:t,setFavoritesId:a}=(0,r.useContext)(s.Y),[o,l]=(0,r.useState)(!0),c=(0,r.useCallback)((async()=>{l(!0),a(await d.readFavorites()),l(!1)}),[a]);return(0,r.useEffect)((()=>{e===n.tD.SignedIn?c():(a([]),l(!1))}),[e,c,a]),{favoritesId:t,isFavoritesIdLoading:o}};var c=a(7689);const h=e=>{const{authStatus:t}=(0,i.aC)(),{favoritesId:a,setFavoritesId:o}=(0,r.useContext)(s.Y),[l,h]=(0,r.useState)(a.includes(e)),u=(0,c.s0)(),v=(0,r.useCallback)((e=>{o((t=>t.filter((t=>t!==e))))}),[o]);return{isFavorite:l,changeFavorite:async()=>{t===n.tD.SignedIn?l?(await d.removeFavorite(e),h(!1),v(e)):(await d.addFavorite(e),h(!0)):u(n.RouteName.REGISTRATION_PAGE)}}};var u=a(8766),v=a(184);const m=(0,r.memo)((e=>{let{favoriteId:t}=e;const{data:a,isLoading:r}=(0,o.b5)(t);return(0,v.jsx)(v.Fragment,{children:!r&&a&&(0,v.jsx)(u.zT,{plant:a})})}))},8766:(e,t,a)=>{a.d(t,{zT:()=>v,Qz:()=>m,Xi:()=>u});var r=a(2791),s=a(1087),i=a(1765),n=a(9917),o=a(184);const d=(0,r.memo)((e=>{let{id:t}=e;const{isFavorite:a,changeFavorite:r}=(0,n.s4)(t);return(0,o.jsx)("button",{className:"heart",onClick:r,"data-testid":"heart",children:a?(0,o.jsx)(i.r6X,{size:25,"data-testid":"heart-add"}):(0,o.jsx)(i.JUb,{size:25,"data-testid":"heart-remove"})})}));var l=a(3537),c=a(8222),h=a(8760);const u=(0,r.memo)((e=>{let{src:t,alt:a,className:r}=e;return(0,o.jsx)("div",{className:"plant-img ".concat(r," ").concat(!t&&"plant-filter"),children:t?(0,o.jsx)(h.Ee,{src:t,alt:a}):(0,o.jsx)(h.Ee,{className:"filter",src:"https://perenual.com/storage/image/missing_image.jpg",alt:"Missing"})})})),v=(0,r.memo)((e=>{let{plant:t}=e;return(0,o.jsxs)("div",{className:"plant-card","data-testid":"plant-card",children:[(0,o.jsx)(s.OL,{to:l.RouteName.PlANT_PAGE+"/"+t.id,children:(0,o.jsx)(u,{src:t.image,alt:t.name})}),(0,o.jsxs)("div",{className:"plant-card__div",children:[(0,o.jsx)(s.OL,{to:l.RouteName.PlANT_PAGE+"/"+t.id,children:(0,o.jsx)("h3",{children:t.name})}),(0,o.jsxs)("div",{className:"plant-card__info",children:[(0,o.jsx)("div",{children:(0,c.gW)(t).map((e=>(0,o.jsx)("div",{children:e},e)))}),(0,o.jsx)(d,{id:t.id})]})]})]})}));function m(e){let{plant:t}=e;return(0,o.jsxs)("div",{className:"plant","data-testid":"plant-details",children:[(0,o.jsx)(u,{src:t.image,alt:t.name}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{children:t.name}),(0,o.jsx)("div",{className:"plant__description","data-testid":"description",children:t.description}),(0,o.jsxs)("div",{className:"plant__info-card","data-testid":"info-card",children:[(0,c.Y7)(t).map((e=>(0,o.jsx)("div",{children:e},e))),(0,o.jsx)(d,{id:t.id})]})]})]})}},206:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var r=a(7689),s=a(3002),i=a(8766),n=a(9917),o=a(3641),d=a(8760),l=a(184);function c(){const{id:e}=(0,r.UO)(),{data:t,isLoading:a}=(0,o.gO)(Number(e)),{isFavoritesIdLoading:c}=(0,n.u1)();return a||c?(0,l.jsx)(d.aN,{}):(0,l.jsx)(s.SV,{FallbackComponent:d.NY,children:t?(0,l.jsx)(i.Qz,{plant:t}):(0,l.jsx)("h2",{className:"nothing-found",children:"Nothing found"})})}},3002:(e,t,a)=>{a.d(t,{SV:()=>n});var r=a(2791);const s=(0,r.createContext)(null),i={didCatch:!1,error:null};class n extends r.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=i}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(null!==e){for(var t,a,r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];null===(t=(a=this.props).onReset)||void 0===t||t.call(a,{args:s,reason:"imperative-api"}),this.setState(i)}}componentDidCatch(e,t){var a,r;null===(a=(r=this.props).onError)||void 0===a||a.call(r,e,t)}componentDidUpdate(e,t){const{didCatch:a}=this.state,{resetKeys:r}=this.props;var s,n;a&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some(((e,a)=>!Object.is(e,t[a])))}(e.resetKeys,r)&&(null===(s=(n=this.props).onReset)||void 0===s||s.call(n,{next:r,prev:e.resetKeys,reason:"keys"}),this.setState(i))}render(){const{children:e,fallbackRender:t,FallbackComponent:a,fallback:i}=this.props,{didCatch:n,error:o}=this.state;let d=e;if(n){const e={error:o,resetErrorBoundary:this.resetErrorBoundary};if("function"===typeof t)d=t(e);else if(a)d=(0,r.createElement)(a,e);else{if(null!==i&&!(0,r.isValidElement)(i))throw o;d=i}}return(0,r.createElement)(s.Provider,{value:{didCatch:n,error:o,resetErrorBoundary:this.resetErrorBoundary}},d)}}}}]);
//# sourceMappingURL=206.ec925417.chunk.js.map