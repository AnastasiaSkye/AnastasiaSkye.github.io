"use strict";(self.webpackChunkaston_project=self.webpackChunkaston_project||[]).push([[363],{9917:(e,a,t)=>{t.d(a,{MF:()=>x,s4:()=>h,u1:()=>d});var s=t(2791),r=t(1350),i=t(5198),n=t(3537),c=t(3641);const l={async addFavorite(e){await c.V5.addFavorite(e)},async removeFavorite(e){await c.V5.removeFavorite(e)},readFavorites:async()=>await c.V5.readFavorites()},d=()=>{const{authStatus:e}=(0,i.aC)(),{favoritesId:a,setFavoritesId:t}=(0,s.useContext)(r.Y),[c,d]=(0,s.useState)(!0),o=(0,s.useCallback)((async()=>{d(!0),t(await l.readFavorites()),d(!1)}),[t]);return(0,s.useEffect)((()=>{e===n.tD.SignedIn?o():(t([]),d(!1))}),[e,o,t]),{favoritesId:a,isFavoritesIdLoading:c}};var o=t(7689);const h=e=>{const{authStatus:a}=(0,i.aC)(),{favoritesId:t,setFavoritesId:c}=(0,s.useContext)(r.Y),[d,h]=(0,s.useState)(t.includes(e)),u=(0,o.s0)(),m=(0,s.useCallback)((e=>{c((a=>a.filter((a=>a!==e))))}),[c]);return{isFavorite:d,changeFavorite:async()=>{a===n.tD.SignedIn?d?(await l.removeFavorite(e),h(!1),m(e)):(await l.addFavorite(e),h(!0)):u(n.RouteName.REGISTRATION_PAGE)}}};var u=t(8766),m=t(184);const x=(0,s.memo)((e=>{let{favoriteId:a}=e;const{data:t,isLoading:s}=(0,c.b5)(a);return(0,m.jsx)(m.Fragment,{children:!s&&t&&(0,m.jsx)(u.zT,{plant:t})})}))},4406:(e,a,t)=>{t.d(a,{uW:()=>m,m8:()=>r,k6:()=>l});var s=t(3641);const r={async addSearchedHistory(e){await s.V5.addSearchedHistory(e)},async removeSearchedHistory(e){await s.V5.removeSearchedHistory(e)},getSearchHistory:async()=>await s.V5.getSearchHistory()};var i=t(2791),n=t(5198),c=t(3537);const l=()=>{const{authStatus:e}=(0,n.aC)(),[a,t]=(0,i.useState)([]),[s,l]=(0,i.useState)(!0),d=(0,i.useCallback)((async()=>{l(!0),t(await r.getSearchHistory()),l(!1)}),[t]);return(0,i.useEffect)((()=>{e===c.tD.SignedIn?d():(t([]),l(!1))}),[e,d,t]),{searchHistory:a,setSearchHistory:t,isHistoryLoading:s}};var d=t(1087),o=t(1909),h=t(184);function u(e){let{id:a,query:t,data:s,setSearchHistory:i}=e;return(0,h.jsxs)("div",{className:"history-row",children:[(0,h.jsx)("div",{children:(0,h.jsx)("button",{onClick:async()=>{await r.removeSearchedHistory(a),i((e=>e.filter((e=>e.id!==a))))},children:(0,h.jsx)(o.lTq,{size:25})})}),(0,h.jsx)("div",{children:(0,h.jsx)(d.rU,{to:c.RouteName.SEARCH_PAGE+"?query="+t,children:s})}),(0,h.jsx)("div",{children:(0,h.jsx)(d.rU,{to:c.RouteName.SEARCH_PAGE+"?query="+t,children:t})})]})}function m(e){let{searchHistory:a,setSearchHistory:t}=e;return(0,h.jsx)(h.Fragment,{children:0!==a.length?(0,h.jsxs)("div",{className:"history-table",children:[(0,h.jsxs)("div",{className:"history-table__head-row",children:[(0,h.jsx)("div",{children:"Delete"}),(0,h.jsx)("div",{children:"Date"}),(0,h.jsx)("div",{children:"Search query"})]}),a.map((e=>(0,h.jsx)(u,{id:e.id,query:e.query,data:e.data,setSearchHistory:t},e.id)))]}):(0,h.jsx)("h2",{className:"history-not-found",children:"Nothing found"})})}},8766:(e,a,t)=>{t.d(a,{zT:()=>m,Qz:()=>x,Xi:()=>u});var s=t(2791),r=t(1087),i=t(1765),n=t(9917),c=t(184);const l=(0,s.memo)((e=>{let{id:a}=e;const{isFavorite:t,changeFavorite:s}=(0,n.s4)(a);return(0,c.jsx)("button",{className:"heart",onClick:s,"data-testid":"heart",children:t?(0,c.jsx)(i.r6X,{size:25,"data-testid":"heart-add"}):(0,c.jsx)(i.JUb,{size:25,"data-testid":"heart-remove"})})}));var d=t(3537),o=t(8222),h=t(8760);const u=(0,s.memo)((e=>{let{src:a,alt:t,className:s}=e;return(0,c.jsx)("div",{className:"plant-img ".concat(s," ").concat(!a&&"plant-filter"),children:a?(0,c.jsx)(h.Ee,{src:a,alt:t}):(0,c.jsx)(h.Ee,{className:"filter",src:"https://perenual.com/storage/image/missing_image.jpg",alt:"Missing"})})})),m=(0,s.memo)((e=>{let{plant:a}=e;return(0,c.jsxs)("div",{className:"plant-card","data-testid":"plant-card",children:[(0,c.jsx)(r.OL,{to:d.RouteName.PlANT_PAGE+"/"+a.id,children:(0,c.jsx)(u,{src:a.image,alt:a.name})}),(0,c.jsxs)("div",{className:"plant-card__div",children:[(0,c.jsx)(r.OL,{to:d.RouteName.PlANT_PAGE+"/"+a.id,children:(0,c.jsx)("h3",{children:a.name})}),(0,c.jsxs)("div",{className:"plant-card__info",children:[(0,c.jsx)("div",{children:(0,o.gW)(a).map((e=>(0,c.jsx)("div",{children:e},e)))}),(0,c.jsx)(l,{id:a.id})]})]})]})}));function x(e){let{plant:a}=e;return(0,c.jsxs)("div",{className:"plant","data-testid":"plant-details",children:[(0,c.jsx)(u,{src:a.image,alt:a.name}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{children:a.name}),(0,c.jsx)("div",{className:"plant__description","data-testid":"description",children:a.description}),(0,c.jsxs)("div",{className:"plant__info-card","data-testid":"info-card",children:[(0,o.Y7)(a).map((e=>(0,c.jsx)("div",{children:e},e))),(0,c.jsx)(l,{id:a.id})]})]})]})}},7583:(e,a,t)=>{t.d(a,{B:()=>u,R:()=>i});var s=t(5198),r=t(184);function i(){const{signOut:e}=(0,s.aC)();return(0,r.jsx)("button",{className:"logout__button",onClick:e,children:"Logout"})}var n=t(2791),c=t(7689),l=t(3537),d=t(8760);const o=e=>!!e.toLowerCase().match(l.kG),h=e=>e.length>=8;function u(e){let{isLogin:a}=e;const[t,i]=(0,n.useState)(""),[u,m]=(0,n.useState)(""),[x,j]=(0,n.useState)(""),[v,g]=(0,n.useState)(""),[y,N]=(0,n.useState)(""),[f,S]=(0,n.useState)(""),[p,_]=(0,n.useState)(""),[C,b]=(0,n.useState)(!1),w=(0,c.s0)(),F=(0,s.aC)(),k=(0,n.useCallback)((()=>{o(t)?S(""):S("Please enter a valid e-mail")}),[t]),E=(0,n.useCallback)((()=>{h(u)?_(""):_("Passwords must have 8 characters or more")}),[u]),I=(0,n.useCallback)((e=>{i(e.target.value),""===e.target.value?j(""):j("Email")}),[]),A=(0,n.useCallback)((e=>{m(e.target.value),""===e.target.value?g(""):g("Password")}),[]),P=(0,n.useCallback)((async e=>{try{e.preventDefault(),k(),E(),o(t)&&h(u)&&(b(!0),a?(await F.signIn(t,u),w(l.RouteName.MAIN_PAGE)):(await F.signUp(t,u),w(l.RouteName.MAIN_PAGE)))}catch(s){b(!1),s instanceof Error?N(s.message):N("unknown_error")}}),[F,t,u,a,k,E,w]);return(0,r.jsxs)(d.l0,{onSubmit:P,className:"auth-form",error:y,"data-testid":"auth-form",children:[(0,r.jsx)(d.II,{placeholder:"Email",type:"email",label:x,onChange:I,id:"username",onBlur:k,error:f}),(0,r.jsx)(d.II,{placeholder:"Password",type:"password",label:v,onChange:A,id:"password",onBlur:E,error:p}),(0,r.jsx)(d.zx,{className:"".concat(C&&"loading"),type:"submit",children:C?"Loading...":a?"Sign in":"Sign up"})]})}},6363:(e,a,t)=>{t.r(a),t.d(a,{default:()=>k});var s=t(7689),r=t(3402),i=t(2791),n=t(2942),c=t(629),l=t(1350),d=t(3537),o=t(8222);function h(){const{theme:e,setTheme:a}=(0,i.useContext)(l.N);return{theme:e,changeTheme:()=>{const t=e===d.Q2.Light?d.Q2.Dark:d.Q2.Light;(0,o.yM)(e),(0,o.rM)(t),(0,o.QL)(t),a(t)}}}var u=t(184);function m(){const{theme:e,changeTheme:a}=h();return(0,u.jsx)("button",{className:"theme-button",onClick:a,children:e===d.Q2.Light?(0,u.jsx)(n.S6R,{size:25}):(0,u.jsx)(c.T32,{size:25})})}var x=t(1087);function j(){return(0,u.jsx)("div",{className:"header__logo",children:(0,u.jsx)(x.OL,{to:d.RouteName.MAIN_PAGE,children:"Plants Gallery"})})}var v=t(2187),g=t(4406),y=t(8760),N=t(8766),f=t(3641);function S(e){let{query:a}=e;const{data:t=[],isLoading:s}=(0,f.ZA)(a);return(0,u.jsx)(u.Fragment,{children:(s||!s&&0!==t.length)&&(0,u.jsx)("ul",{className:"suggestions-list",children:s?(0,u.jsx)("li",{children:"Loading..."}):(0,u.jsx)(u.Fragment,{children:t.map((e=>(0,u.jsx)("li",{children:(0,u.jsxs)(x.OL,{to:d.RouteName.PlANT_PAGE+"/"+e.id,children:[(0,u.jsx)(N.Xi,{src:e.image,alt:e.name,className:"height-50px"}),(0,u.jsx)("div",{className:"suggestions-list__text",children:e.name})]})},e.id)))})})})}function p(e){let{queryParam:a}=e;const[t,r]=(0,i.useState)(a),[n,c]=(0,i.useState)(!1),l=(0,o.Nr)(t,500),h=(0,s.s0)(),m=(0,i.useCallback)((e=>{r(e.target.value)}),[]),x=(0,i.useCallback)((()=>{c(!0)}),[]),j=(0,i.useCallback)((()=>{setTimeout((()=>c(!1)),300)}),[]),N=(0,i.useCallback)((async e=>{e.preventDefault(),0!==t.length&&(c(!1),await g.m8.addSearchedHistory(t),h(d.RouteName.SEARCH_PAGE+"?query="+t))}),[h,t]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(y.l0,{onSubmit:N,children:[(0,u.jsx)(y.II,{placeholder:"Enter a search query",value:t,onChange:m,onFocus:x,onBlur:j}),(0,u.jsx)("button",{className:"search-form__icon",children:(0,u.jsx)(v.eaK,{size:20})})]}),l&&n&&l.length>=2&&(0,u.jsx)(S,{query:l})]})}function _(){const[e]=(0,x.lr)();return(0,u.jsx)("div",{className:"header__search","data-testid":"search",children:(0,u.jsx)(p,{queryParam:e.get("query")||""},e.get("query")||"")})}var C=t(7583),b=t(5198);function w(){const{authStatus:e}=(0,b.aC)();return(0,u.jsx)("nav",{className:"header__nav",children:(0,u.jsxs)("ul",{children:[e===d.tD.SignedIn&&(0,u.jsxs)(u.Fragment,{children:[d.wE.map((e=>(0,u.jsx)("li",{children:(0,u.jsx)(y.rU,{href:e.href,text:e.text})},e.href))),(0,u.jsx)("li",{children:(0,u.jsx)(C.R,{})})]}),e===d.tD.SignedOut&&(0,u.jsx)(u.Fragment,{children:d.vA.map((e=>(0,u.jsx)("li",{children:(0,u.jsx)(y.rU,{href:e.href,text:e.text})},e.href)))})]})})}function F(){return(0,u.jsx)("header",{className:"header","data-testid":"header",children:(0,u.jsx)("div",{className:"container",children:(0,u.jsxs)("div",{className:"header__row",children:[(0,u.jsx)(j,{}),(0,u.jsx)(_,{}),(0,u.jsx)(w,{}),(0,u.jsx)(m,{})]})})})}function k(){const{theme:e}=h();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(F,{}),(0,u.jsx)("main",{children:(0,u.jsx)("div",{className:"container",children:(0,u.jsx)(s.j3,{})})}),e===d.Q2.Light?(0,u.jsx)(r.x7,{toastOptions:d.G5}):(0,u.jsx)(r.x7,{toastOptions:d.m2})]})}}}]);
//# sourceMappingURL=363.584fd05e.chunk.js.map